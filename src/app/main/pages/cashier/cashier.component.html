<mat-drawer-container class="mat-drawer-order">
    <mat-drawer mode="side" opened>
        <!-- SIDEBAR -->

        <img class="logo-small" src="assets/images/sm_logo.png" alt="logo-small">

        <!-- <h4 class="fw-bold text-center mb-0">POS</h4>
        <p class="d-flex justify-content-center align-items-center text-center info-nav px-2"> {{ activeRoute }}</p>

        <hr> -->
        <h4 class="fw-bold text-center mb-0">PINTAS</h4>

        <a routerLink="/order" [queryParams]="{nav: 'shortcut'}" queryParamsHandling="merge">
            <div class="d-flex px-3 py-2 w-100">
                <button [ngClass]="{'active': activeRoute === 'shortcut'}" mat-button
                    class="w-100 btn-indicator-left active">
                    <mat-icon>brunch_dining</mat-icon>
                    <p class="mb-0">Pesan</p>
                </button>
            </div>
        </a>


        <div (click)="back()" class="d-flex align-items-center px-3 py-2 mt-2 cursor-pointer btn-flip bottom-fixed">
            <!-- <mat-icon class="btn-indicator-left" svgIcon="back"></mat-icon> -->
            <p class="mb-0 px-2"><strong>Kembali</strong></p>
        </div>

        <!-- <a class="bottom-fixed" style="width: 10%" routerLink="/cashier">
            <div class="d-flex px-3 py-2 w-100">
                <button mat-button class="w-100 btn-indicator-left btn-flip">
                    <mat-icon>point_of_sale</mat-icon>
                    <p class="mb-0">Kasir</p>
                </button>
            </div>
        </a> -->


    </mat-drawer>
    <mat-drawer-content>

        <div class="row m-0 section-page">
            <!-- PAGE SECTION -->
            <div class="col p-0">
                <list-order-app></list-order-app>
            </div>

            <!-- CHECKOUT SECTION -->
            <div class="col-4 p-0">
                <!-- LIST ITEM -->
                <div [ngClass]="tempRepo.isMergeBill? 'detail-list-checkout-in-merge' : 'detail-list-checkout'"
                    class="">
                    <ul class="list-group list-group-flush sticky">
                        <li class="list-group-item d-flex align-items-center">ID Order #{{ tempRepo.tempSalesActive?.id
                            }} <button (click)="tempRepo.updateTempSales()" *ngIf="tempRepo.tempSalesActive?.id"
                                mat-button class="col mx-2 btn-confirm">Ubah</button>
                        </li>
                    </ul>
                    <ng-container *ngIf="tempRepo.tempSalesActive?.items !== null; else emptyCart">
                        <div class="item-temp p-1 bg-white" *ngFor="let item of tempRepo.tempSalesActive?.items">

                            <mat-card class="items-card">
                                <mat-card-title-group>
                                    <mat-card-subtitle>
                                        <p class="mb-0 fw-bold">{{ item.name }}</p>{{ item.unitPrice | rupiah }}
                                    </mat-card-subtitle>
                                    <img mat-card-sm-image
                                        [src]="item.pic !== null || item.pic !== ''? item.pic : 'assets/images/no_pic_square.png'">
                                </mat-card-title-group>
                                <mat-card-content>
                                    <div class="d-flex justify-content-between">
                                        <div class="d-flex justify-content-start">
                                            <p style="margin-right: 10px;" class="fw-bold mb-0"> x{{ item.amount }} </p>
                                            <p class="fw-bold mb-0"> {{ item.totalPrice | rupiah }} </p>
                                        </div>
                                        <p> {{ item.isPackage? 'Paket' : 'Satuan' }} </p>
                                    </div>
                                </mat-card-content>
                            </mat-card>

                        </div>
                    </ng-container>
                    <ng-template #emptyCart>
                        Review Item masih kosong
                    </ng-template>
                </div>
                <!-- LIST ITEM -->

                <!-- IF LIST MERGE BILL ACTIVE -->
                <div *ngIf="tempRepo.isMergeBill" class="detail-list-merge">
                    <div class="d-flex align-items-center search-input px-2">
                        <input placeholder="Nama" class="col" type="text" [(ngModel)]="tempRepo.merge.name" mat-input>
                        <mat-icon (click)="tempRepo.merge.name = ''" class="col-2 mx-3 cursor-pointer" svgIcon="remove">
                        </mat-icon>
                    </div>
                    <div class="d-flex align-items-center search-input px-2">
                        <input placeholder="Catatan" class="col" type="text" [(ngModel)]="tempRepo.merge.note"
                            mat-input>
                        <mat-icon (click)="tempRepo.merge.note = ''" class="col-2 mx-3 cursor-pointer" svgIcon="remove">
                        </mat-icon>
                    </div>
                    <div class="container row h-inherit overflow-auto m-0 pb-5rem">

                        <ng-container *ngIf="tempRepo.listBillInbound">

                            <ol class="list-group list-group-numbered p-0">
                                <li class="list-group-item d-flex justify-content-between align-items-start"
                                    *ngFor="let bill of tempRepo.listBillInbound">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">{{ bill.id }}</div>
                                        {{ bill.name == ""? '': bill.name }} <span *ngIf="bill.tableIds.length > 0"
                                            style="padding-left: 10px;">T.</span> {{
                                        bill.tableIds.length > 0? getTable(bill.tableIds[0]) : 'Take Away' }}
                                    </div>
                                    <span class="badge text-dark rounded-pill">
                                        {{ tempRepo.getTotalPrice(bill.items) | rupiah}}
                                    </span>
                                </li>
                            </ol>

                        </ng-container>

                    </div>
                </div>
                <!-- IF LIST MERGE BILL ACTIVE-->


                <!-- DESCRIPTION CHECKOUT -->
                <div class="payment-list-checkout">
                    <ul class="list-group list-group-flush">
                        <li *ngIf="!tempRepo.isMergeBill" class="list-group-item d-flex justify-content-between">Jumlah
                            item #
                            {{tempRepo.tempSalesActive?.items?.length }}
                            <div class="col-4 fw-bold">
                                {{ tempRepo.getTotalPrice(tempRepo.tempSalesActive?.items?? []) | rupiah }}
                            </div>
                        </li>
                        <li *ngIf="tempRepo.isMergeBill" class="list-group-item d-flex justify-content-between">Jumlah
                            item #
                            {{tempRepo.listBillInbound.length }}
                            <div class="col-4 fw-bold">
                                {{ tempRepo.grand_total | rupiah}}
                            </div>
                        </li>
                    </ul>



                    <ng-container *ngIf="tempRepo.isMergeBill; else isNormal">
                        <div class="d-flex">
                            <button [disabled]="tempRepo.isLoadingMerge" (click)="tempRepo.clearMerge()" mat-button
                                color="accent" class="col-4">{{ tempRepo.isLoadingMerge? '' : 'Batal' }}</button>
                            <button [disabled]="tempRepo.isLoadingMerge" (click)="tempRepo.submitMerge()" mat-button
                                class="btn-pay"> {{ tempRepo.isLoadingMerge? 'Loading...' : 'Gabung Tagihan' }}</button>
                        </div>
                    </ng-container>
                    <ng-template #isNormal>
                        <button mat-button class="btn-pay">Bayar</button>
                    </ng-template>



                </div>
                <!-- DESCRIPTION CHECKOUT -->
            </div>
        </div>



    </mat-drawer-content>
</mat-drawer-container>